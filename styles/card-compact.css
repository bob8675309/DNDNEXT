/* Mini-card grid (no globals, no offcanvas, no backgrounds here) */
/* Tighten grid spacing + allow denser columns */
/* Mini-card grid (layout lives in globals.scss; keep only a safe gap here) */
/* Mini-card grid (no globals, no offcanvas, no backgrounds here) */
/* Tighten grid spacing + allow denser columns */

.merchant-grid .tile{
  position: relative;
  width: calc(var(--card-w) * var(--mini-scale));
  height: calc(var(--card-h) * var(--mini-scale) + 36px);
  outline: none;
  overflow: visible;
}

/* The actual card sits inside at full size, scaled down; expand toward the map */
.merchant-grid .tile .sitem-card{
  position: absolute;
  right: 0;
  top: 0;
  width: var(--card-w);
  height: var(--card-h);
  transform-origin: top right;
  transform: scale(var(--mini-scale));
  transition: transform .15s ease, box-shadow .15s ease, z-index .15s ease;
  z-index: 1; /* globals.scss pumps this on hover/focus */
}

.merchant-grid .tile .buy-strip{
  position: absolute;
  left: 0; right: 0; bottom: 0;
  height: 32px;
  display: flex; align-items: center; justify-content: space-between;
  gap: 8px; padding: 0 .5rem;
  z-index: 2;
}

/* Expand to full size on hover or keyboard focus */
.merchant-grid .tile:hover .sitem-card,
.merchant-grid .tile:focus-within .sitem-card{
  transform: scale(1);
  box-shadow: 0 10px 28px rgba(0,0,0,.45);
}

.merchant-grid .tile:hover .buy-strip,
.merchant-grid .tile:focus-within .buy-strip{ transform: translateY(-6px); }

.merchant-grid .tile:hover,
.merchant-grid .tile:focus-within{ z-index: 20; }

/* Guard: some global styles force tiny widths; ensure a sane minimum */
.sitem-card{ min-width: var(--card-w); }

@media (max-width: 576px){
  .merchant-panel-inner .merchant-grid{
    width: 100%;
    margin-left: 0;
    justify-content: center;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 10px;
  }

  #merchantPanel .offcanvas-body{
    max-height: calc(100vh - 82px);
  }
}

/* ===================================================================== */
/* === OVERRIDES – 2025-10-28 (non-destructive; appended for cascade) === */
/* Keep this file focused on the grid only; panel backgrounds/z-index are
   handled in globals.scss. These tweaks align with the new behavior.     */
/* ===================================================================== */


/* Hide controls until the tile is focused/hovered (declared here too in case
   this file loads after globals) */
.merchant-grid .tile .buy-strip{
  opacity: 0;
  pointer-events: none;
  transition: opacity .12s ease, transform .12s ease;
}
.merchant-grid .tile:hover .buy-strip,
.merchant-grid .tile:focus-within .buy-strip{
  opacity: 1;
  pointer-events: auto;
}

/* Strong escalation so expanded card always wins even if this file loads last */
.merchant-grid .tile:hover .sitem-card,
.merchant-grid .tile:focus-within .sitem-card{
  z-index: 10000; /* mirrors globals.scss override */
}

/* Optional: slightly smaller minis for denser layout */
:root{
  --mini-scale: .24; /* keep in sync with globals.scss */
}
.merchant-panel-inner .merchant-grid{
  /* This beats the looser .merchant-grid rules in globals.scss */
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(0, max-content));
  gap: 8px;              /* close spacing – about the “half inch” feel */
  width: min-content;    /* grid shrinks to fit the cards */
  margin-left: auto;     /* push grid toward the right edge */
  justify-content: end;  /* cards cluster on the right, more art visible */
}

/* ================= QUARANTINE NOTE =================
   Older versions of this file sometimes included Offcanvas or background
   rules (e.g., #merchantPanel .offcanvas-body). Those now live in
   globals.scss so we don’t fight the cascade. Leaving this note so if you
   see those again, consider moving them there. 
==================================================== */
